{% extends 'NKHintBundle::layout.html.twig' %}

	{% block sub_header %}
        	<div class="row" id="sub-header" style="background-color:{{niveau.couleurNiveau}}">
        		<span class="level-name-header">{{niveau.nomNiveau}} - {{nomMatiere}}</span>
			</div>
    {% endblock sub_header %}

{% block NKHintBundle_content %}
	<div class="row">
		<div class="col-sm-offset-1 col-sm-3">
			<div style="margin-top:30px;">
	            <div id="section-document">
	                <a id="section1" data-toggle="collapse" href="#document"><span id="partie1" class="glyphicon glyphicon-folder-close"></span> Documents</a>
	                <ul id="document" class="collapse">
	                    <li>
	                    	<a data-toggle="collapse" href="#sousdocument1"><span id="partie2" class="glyphicon glyphicon-folder-close"></span> Cours</a>
	                    	<ul id="sousdocument1" class="collapse">
	                    		{% for document in documents|sort %}
	                    			{% if document.category.nomCategory == "Cours" %}
	                    				<li>
	                    					<button class="document-button" onclick= "chargerpdf({{document.id}})">{{document.nomDocument}}</button>
	                    				</li>
	                    				<br>
	                    			{% endif %}
	                    		{% endfor %}
	                    	</ul>
	                    </li>
	                    <li>
	                    	<a data-toggle="collapse" href="#sousdocument2"><span id="partie3" class="glyphicon glyphicon-folder-close"></span> Exercices</a>
	                        <ul id="sousdocument2" class="collapse">
	                            {% for document in documents|sort %}
	                    			{% if document.category.nomCategory == "Exercice" %}
	                    				<li>
	                    					<button onclick= "chargerpdf({{document.id}})" class="document-button">{{document.nomDocument}}</button>
	                    				</li>
	                    				<br>
	                    			{% endif %}
	                    		{% endfor %}
	                        </ul>
	                    </li>
	                 </ul>
	            </div>
	        </div>
		</div>
		<div class="col-sm-7" style="height: 950px;" id="affiche-pdf">
		</div>
	</div>

{% endblock NKHintBundle_content %}
{% block javascripts %}
	<script>	
		$(function(){
			$('#document').on('shown.bs.collapse', function() {
    			$("#partie1").addClass('glyphicon-folder-open').removeClass('glyphicon-folder-close');
  			});
  			$('#document').on('hidden.bs.collapse', function() {
    			$("#partie1").addClass('glyphicon-folder-close').removeClass('glyphicon-folder-open');
  			});
  			$('#sousdocument1').on('shown.bs.collapse', function() {
    			$("#partie2").addClass('glyphicon-folder-open').removeClass('glyphicon-folder-close');
  			});
  			$('#sousdocument1').on('hidden.bs.collapse', function() {
    			$("#partie2").addClass('glyphicon-folder-close').removeClass('glyphicon-folder-open');
  			});
  			$('#sousdocument2').on('shown.bs.collapse', function() {
    			$("#partie3").addClass('glyphicon-folder-open').removeClass('glyphicon-folder-close');
  			});
  			$('#sousdocument2').on('hidden.bs.collapse', function() {
    			$("#partie3").addClass('glyphicon-folder-close').removeClass('glyphicon-folder-open');
  			});  			
		});

		function chargerpdf(idDocument){
			var url = "{{ path('nk_hint_afficherdoc', {'idDocument': 'exemple'}) }}";
                url = url.replace("exemple", idDocument);
			xmlhttp= new XMLHttpRequest();
			xmlhttp.onreadystatechange=function(){
				if(this.readyState==4 && (this.status == 200)){
					document.getElementById("affiche-pdf").innerHTML =
            this.responseText;
				}
			}
			xmlhttp.open("GET",url, true);
			xmlhttp.send();
		}
	</script>

{% endblock javascripts %}
